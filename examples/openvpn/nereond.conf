file "openvpn-main-config" {
    path = "/etc/openvpn/openvpn.conf"
    mode = "0400"
    user = "openvpn"
    group = "openvpn"
    content = <<EOF
port 1194
proto udp
dev tun
ca ca.crt
cert server.crt
key server.key
dh dh2048.pem
server 10.8.0.0 255.255.255.0
ifconfig-pool-persist ipp.txt
keepalive 10 120
tls-auth ta.key 0
cipher AES-256-CBC
persist-key
persist-tun
status openvpn-status.log
verb 3
explicit-exit-notify 1
EOF
}

file "openvpn-ca-cert" {
    path = "/etc/openvpn/ca.crt"
    mode = "0400"
    user = "openvpn"
    group = "openvpn"
    content = <<EOF
-----BEGIN CERTIFICATE-----
MIIDNTCCAh2gAwIBAgIJAJLdBKbrHYBgMA0GCSqGSIb3DQEBCwUAMBYxFDASBgNV
BAMMC0Vhc3ktUlNBIENBMB4XDTE4MDYxNTA5Mzg0NloXDTI4MDYxMjA5Mzg0Nlow
FjEUMBIGA1UEAwwLRWFzeS1SU0EgQ0EwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAw
ggEKAoIBAQC47Qy+gYkY12NlT9Cyt8Ye7zJraSZUeM0N6f10fOOjSZ/Q4ysfbVUx
8R0Qkw2x0GVy36S7RmuKXsW/iiXoYnY4odd+91eRjwr8v8AI5f+XnFOyK2yNJx7r
gq6y0ldinfpyH366X0jOo8laEaP5FAlOHUunDxYR3T0bkJ6JmIEpV9QHgXmgQce+
IB0LGcqQFDBCdwpZ/Xpre7b9i0+ySw6CIePMglmnkVo9j4DjiSBsq68ow+lGLMC8
CRw2RMEbUiHbcN4sN2rFVjOJEDsJFHrdlN60+6IcLYfakx167Tx+1ngW9ObLamUO
Qke5LF58YxZu8ZSYaMpk+DEw+LlzSBcFAgMBAAGjgYUwgYIwHQYDVR0OBBYEFHZ2
g1/DAW9OoCFORB48a6X37PtSMEYGA1UdIwQ/MD2AFHZ2g1/DAW9OoCFORB48a6X3
7PtSoRqkGDAWMRQwEgYDVQQDDAtFYXN5LVJTQSBDQYIJAJLdBKbrHYBgMAwGA1Ud
EwQFMAMBAf8wCwYDVR0PBAQDAgEGMA0GCSqGSIb3DQEBCwUAA4IBAQB/rThi306F
dAGfmEAK8/62IjL0ZioRYEMP91wCNYoHVo4O1qHWrYrt1A2Yz4Zay7IB9dWlnMp8
EtwJrzkPHXRMol9s+tmWs10nrxTPJZ4dtimtosTKNmu0SK183lPDFfgw0WMTunvY
f1Rl1feW/hnRqZW7D/NNqfCHt+y0ztlcTt3GcNR/LI8b3BBUvLhQZoF68jN8R0NX
w4SNPTlxh1Lwwp7mWC0JJS43elsSBVkhdBL1OTr46rmwVLYwBLRKVdqhMhuZP7y6
PtAeKDqIOkDP5CvJHLEwGyqiI7Q+9kVAzk3x24m+oUkExP4OtlYT/m8GAY4/eEse
d8ijOuy211qp
-----END CERTIFICATE-----
EOF
}

file "openvpn-server-cert" {
    path = "/etc/openvpn/server.crt"
    mode = "0400"
    user = "openvpn"
    group = "openvpn"
    content = <<EOF
Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number:
            d6:0b:eb:27:37:6f:98:07:8c:bb:ac:78:09:ed:6d:9d
    Signature Algorithm: sha256WithRSAEncryption
        Issuer: CN=Easy-RSA CA
        Validity
            Not Before: Jun 15 09:47:11 2018 GMT
            Not After : Jun 12 09:47:11 2028 GMT
        Subject: CN=server
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
                Public-Key: (2048 bit)
                Modulus:
                    00:d2:24:bc:aa:6c:48:18:19:8b:11:5a:14:d5:c2:
                    dc:bd:3d:21:1b:b6:20:4d:8a:91:1b:4e:30:d1:05:
                    2f:b2:fb:0d:c0:7e:86:c8:e6:b3:27:9d:ed:62:0a:
                    f8:36:1d:77:09:c4:af:a4:f8:2f:8b:14:1a:53:91:
                    67:ae:a0:3a:b1:dc:18:e8:2f:5d:06:e7:c8:fd:8a:
                    f4:7f:c3:fc:d8:9d:a6:5d:64:d5:76:12:27:a5:aa:
                    20:28:d0:65:00:7f:67:e2:e4:ae:d6:62:42:4b:d6:
                    be:49:d9:04:2f:4c:84:19:c4:b3:0b:88:d0:9c:9c:
                    5d:6c:9b:12:63:b1:8f:ae:bd:1e:1f:ee:a0:6a:28:
                    7a:86:f4:c8:5a:bd:8f:d8:e8:d4:2a:1a:a8:10:75:
                    52:94:1c:b9:34:c3:bc:c8:ac:f3:e4:52:88:65:6c:
                    7b:5e:e4:b7:de:d6:b9:47:72:70:60:9d:65:41:b9:
                    8a:ad:a6:b2:50:36:fe:41:89:e4:fd:d9:08:c9:2a:
                    5f:af:26:72:85:45:63:ee:3f:23:6b:22:ef:dc:d9:
                    5c:84:40:0f:8a:af:d8:36:d9:2e:fb:fe:a9:73:9d:
                    10:25:e4:5c:7e:aa:e2:09:21:4c:6d:12:e0:66:61:
                    c9:1d:1d:be:a8:4c:f0:c4:d6:90:de:75:42:92:f9:
                    3d:6f
                Exponent: 65537 (0x10001)
        X509v3 extensions:
            X509v3 Basic Constraints: 
                CA:FALSE
            X509v3 Subject Key Identifier: 
                29:63:9F:33:28:03:34:D8:1D:2D:D4:F7:54:49:44:47:93:4D:15:02
            X509v3 Authority Key Identifier: 
                keyid:76:76:83:5F:C3:01:6F:4E:A0:21:4E:44:1E:3C:6B:A5:F7:EC:FB:52
                DirName:/CN=Easy-RSA CA
                serial:92:DD:04:A6:EB:1D:80:60

            X509v3 Extended Key Usage: 
                TLS Web Server Authentication
            X509v3 Key Usage: 
                Digital Signature, Key Encipherment
            X509v3 Subject Alternative Name: 
                DNS:server
    Signature Algorithm: sha256WithRSAEncryption
         48:42:18:16:50:2f:01:6f:2e:37:44:66:c2:9f:52:f3:2f:de:
         54:41:fd:c5:1d:82:2e:05:58:50:95:c8:51:98:94:ca:95:7a:
         4b:65:80:c0:7b:04:aa:00:e9:89:1b:4b:49:c9:2c:aa:3b:eb:
         32:c6:94:5b:8d:82:74:85:57:af:34:cd:7d:7c:3a:81:4c:0a:
         2d:40:36:b9:3f:5f:d8:14:c4:e0:d4:b9:00:b1:e7:d0:6f:5c:
         45:b1:ca:41:63:3b:d5:b5:1f:98:ac:5a:1d:57:25:46:00:70:
         0e:f1:ca:3f:1b:5b:20:45:13:0f:1b:55:bb:18:b5:ad:66:5a:
         31:83:19:96:77:18:ec:59:6d:da:de:7c:6d:27:5c:db:51:e6:
         b9:79:b8:4f:b9:1e:a2:1b:ea:5c:a2:4a:06:b3:33:5a:71:e3:
         71:bb:dd:b1:b9:ef:1a:fb:a3:d7:61:dd:08:82:b8:59:4a:f6:
         08:1a:8e:7c:4b:79:2c:b0:48:2f:ba:e5:bb:3c:af:22:05:ef:
         e5:af:12:b1:a9:dd:7d:eb:6b:4e:b5:92:91:cc:1f:37:8f:8e:
         2e:b9:30:0e:1f:25:c5:54:6a:ff:4d:61:38:11:d3:f0:75:0c:
         ac:8a:76:83:05:4f:f8:be:05:6e:28:4a:90:c8:f5:59:6f:20:
         2b:a9:cf:32
EOF
}

file "openvpn-server-keyt" {
    path = "/etc/openvpn/server.key"
    mode = "0400"
    user = "openvpn"
    group = "openvpn"
    content = <<EOF
-----BEGIN PRIVATE KEY-----
MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDSJLyqbEgYGYsR
WhTVwty9PSEbtiBNipEbTjDRBS+y+w3AfobI5rMnne1iCvg2HXcJxK+k+C+LFBpT
kWeuoDqx3BjoL10G58j9ivR/w/zYnaZdZNV2EielqiAo0GUAf2fi5K7WYkJL1r5J
2QQvTIQZxLMLiNCcnF1smxJjsY+uvR4f7qBqKHqG9MhavY/Y6NQqGqgQdVKUHLk0
w7zIrPPkUohlbHte5Lfe1rlHcnBgnWVBuYqtprJQNv5BieT92QjJKl+vJnKFRWPu
PyNrIu/c2VyEQA+Kr9g22S77/qlznRAl5Fx+quIJIUxtEuBmYckdHb6oTPDE1pDe
dUKS+T1vAgMBAAECggEBAIm1f1ljGh+I5aRaVtr6FnOAkqi5QhPuYUb2h3ECKA7v
DET/5U3UOMUWbhBYxe2Yg4CIPt4pseY/Jz1qRPqfj7csV7oYB6tVy1WzcKQliBVf
wjzjrirwnMCoaui0H+wika6TU6uzumQ+dnaoW2CvkMXeK8K8RpDKu0JHoNZp7pF/
teTogM7Sbm2laUDGx9Zo2QSmfWlsX30sbOcR2JmEeNlYrPg3G1nYTBNqMgrqXqQ4
C4oP4esO1LeSOctOFYolC/Cv6wJr+5v10yCJ0zO5FOQX7LpRrFMzB1CleqPBlITg
gL3OGCDc/1AvSHqkscsZXuxwP2+23yck1ZbTJe5WDnkCgYEA/prNNVHHRouEizdp
gyltgfBDTxScA0HS0xZsERp1ALqo2U3oA7MgDOTUDn4FVDSYkz8annICdd9dsXDX
K/bvNjmvErDAcf2dQpWPyzXKQcgvNWnBpVLzie1mj03aTqGuhAh9gFBx1n9Z5ZMP
5A6NkEW1aXu4VOeDfns01qeEW/UCgYEA00uO9NMJLxHq7mmBSePkKe1/bMY27N//
AaqjYA2iGqwYPl+Elto2ETl60quMTL5IHp/MryohTsSa2KEhow9ZtPXmzN6Y8XSO
P28/Oo/XlSCrvs+u1LiBYUARDhpy9vGKwNeyX1G2gHDmmk/bOW5S/zgb8gKJcesF
x33o+kFymVMCgYAa1j5jLGeQ7AvgkMqyZJ+CXsz5fPak8T9DuM1TUDKdDQ/XN/sI
yMzMDyK7FFWDdrfObYxkvye7PPwnQ/mqTLESSipGEhN28ICvEAzEIrtbC7rOKoOa
5Y9+LmPtHwuv1iMLD8oKyG/3aB0Vsdau90m8t1xT7hKUAIM/xcTgC3BMMQKBgB+D
4pOzsmf55S+gPu91dT+ns9zWh7S3CEMIX4vhHK+bwZX0C0Ow0mWpTB+GBMwhiYI/
1Xi+8O7dtjbfebPngzrRfpZKEUfaWakuf6DNeZs9n0A7m9kQmAOYWbLf0QvyJP70
bR94gZ8Qt+SGSq17PhfhF5H2POfn5RnHNuu0vVIPAoGBAIEInVeTV7LMs6gAIaSO
wEBdnV58NoVvsT8M1jyW1wLEVysUBSrz1Sn9ysRL9vNTc1je2UAuOmbRviXMmU8s
lCpUR8k7gsgLX3jdDkP8/4pTqjRovXTpd3Xa4/paBYzLxYEkbyXVR+9Bx6wBy1M7
WVjVmtkw/Y0/S+NH9eNxiFhK
-----END PRIVATE KEY-----
EOF
}

file "openvpn-dh-params" {
    path = "/etc/openvpn/dh2048.pem"
    mode = "0400"
    user = "openvpn"
    group = "openvpn"
    content = <<EOF
-----BEGIN DH PARAMETERS-----
MIIBCAKCAQEA0Iq9R6RImoXIQUNHQJvH6aG3H9Z85gb0G4xxX2z/ouPW79jJdTEu
G5BDF4uNA5IyMMcYwJzH11yudJo4k7abskTRIUUPyfcKO5Yp1I+ubF4z7z9wXIeq
SzC4xbwLZvSD7mRa6+Dt4zsukQBdYtnK2F0Ar32z6lPntlsjMQGWaPoTy02VSHkt
0ERaJNIxSRLH1dZaAuNOucsFU+M470bBqX6KWKVQJ0y6/HsXm8hPZO+9OAcqEVL6
xOrzrBkWQPAoUTP02nKojiPbpibuqHm+aOJGAW3/+J7Jp18clM06sakuQ/0MuR5o
mCpq4dHlIJCcCIgVDYjX9FlGXy4a3RuDIwIBAg==
-----END DH PARAMETERS-----
EOF
}

file "openvpn-ta-key" {
    path = "/etc/openvpn/ta.key"
    mode = "0400"
    user = "openvpn"
    group = "openvpn"
    content = <<EOF
#
# 2048 bit OpenVPN static key
#
-----BEGIN OpenVPN Static key V1-----
73f4f02664e5aa4d2289603b58c15238
b3d8b77abac908efa59199fa5c57ccd6
6b5ac1d095c48d8b60d7de0b8e391f5f
b1f71b4c30b2d935701f394a031bc2ca
e08299e5db4e530950532184f9352396
9317995a9d55bfcafc1d771d99add189
916202e949107751b689fa402d71b729
f57281471b052422be55602e9f83a1f0
cfb7c502fdf735998b191b1425cac4f1
7eeabe37357a6532b3382b182f9495bc
7844596485f909f7678b1b674100f0dc
dacab7808ef14b08ba8ff27967ca58fc
5978b7e7ce837bc39206d00a3f1607f9
62108ac1cc67b728cf9de776ecb70041
bc7facea1d581a62c8c6f183f36488c9
fc5f2e00d0d145020db0073de240488b
-----END OpenVPN Static key V1-----
EOF
}

