{
    "init" : {
        "application_groups" : [
            "webstack"
        ]
    },
    
    "application_groups" : {
        "webstack" : {
	    "applications" : [
	        "db",
		"www"
	    ],
	    "dependencies" : [
	        "webstack"
	    ]
        }
    },

    "applications" : {
        "db" : {
	    "exec" : "/etc/init.d/db",
	    "healthchecks" : [
	        "db"
	    ],
	    "healtcheckfail" : "restart"
	},
	"www" : {
	    "exec" : "/etc/init.d/nginx",
	    "healthchecks" : [
	        "www"
	    ],
	    "healtcheckfail" : "restart"
	}
    },

    "healthchecks" : {
        "db" : {
	    "checks" : [
	        {
		    "type" : "df",
		    "file" : "/var/lib/mysql",
		    "free" : 512
		},
		{
		    "type" : "proc",
		    "proc" : "mysqld"
		},
		{
		    "type" : "tcp",
		    "addr" : "127.0.0.1:3306",
		    "timeout" : 10
		}
	    ],
	    "interval" : 60
	},
	"www" : {
	    "checks" : [
	        {
		    "type" : "proc",
		    "proc" : "httpd"
		},
		{
		    "type" : "tcp",
		    "addr" : "127.0.0.1:80",
		    "timeout" : 5
                }
	    ],
	    "interval" : 90
	}
    },

    "dependencies" : {
        "webstack" : []
    }
}